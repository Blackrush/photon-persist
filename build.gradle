group = 'org.photon.common'
version = '0.1.2'

apply plugin: 'scala'
apply plugin: 'idea'
apply from: 'deploy.gradle'

repositories {
    mavenCentral()
}

dependencies {
    compile "org.scala-lang:scala-library:${scalaStdlibVersion}"
    compile "com.typesafe:scalalogging-slf4j_${scalaVersion}:${typesafeLoggingVersion}"
    compile "com.twitter:util-core_${scalaVersion}:${twitterUtilVersion}"

    testCompile 'org.scalatest:scalatest_2.10:2.0'
    testRuntime 'org.postgresql:postgresql:9.2-1003-jdbc3'
}

sourceSets {
    main {
        scala {
            srcDirs = ['src']
        }
        resources {
            srcDirs = ['src']
        }
    }
    test {
        scala {
            srcDirs = ['test']
        }
    }
}

scaladoc {
    source sourceSets.main.scala
}

test << {
    ant.taskdef(name: 'scalatest', classname: 'org.scalatest.tools.ScalaTestAntTask', classpath: classpath.asPath)
    ant.scalatest(runpath: testClassesDir, haltonfailure: 'true', fork: 'false') {
        reporter(type: 'stderr')
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.8'
}